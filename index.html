<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Live Stream + JOIN + Chat</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    :root{--bg:#000;--accent:#ff0000;--muted:#999}
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:#fff}
    .page{max-width:1100px;margin:0 auto;padding:14px}
    header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:10px}
    header h1{font-size:18px;margin:0}
    .controls{display:flex;gap:8px;align-items:center}
    .controls select, .controls button{padding:6px 8px;border-radius:6px;border:0;background:#222;color:#fff;cursor:pointer}
    /* Player area and aspect ratios */
    .player-wrap{width:100%;background:#000;border-radius:6px;overflow:hidden;margin-bottom:12px;display:flex;align-items:center;justify-content:center}
    .player-wrap video{width:100%;height:100%;display:block;object-fit:cover}
    .player-wrap.aspect-16-9{position:relative;padding-top:56.25%}
    .player-wrap.aspect-16-9 video{position:absolute;top:0;left:0;height:100%;width:100%}
    .player-wrap.aspect-4-3{position:relative;padding-top:75%}
    .player-wrap.aspect-4-3 video{position:absolute;top:0;left:0;height:100%;width:100%}
    .player-wrap.aspect-21-9{position:relative;padding-top:42.85%}
    .player-wrap.aspect-21-9 video{position:absolute;top:0;left:0;height:100%;width:100%}
    .player-wrap.aspect-stretch{height:360px;padding-top:0}
    .player-wrap.aspect-stretch video{position:relative;height:100%;width:100%}

    /* JOIN buttons 2x2 grid */
    .join-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;max-width:620px;margin:0 auto 14px auto}
    .join-btn{
      display:inline-flex;align-items:center;justify-content:center;
      background:var(--accent);color:#fff;text-decoration:none;font-weight:700;
      padding:10px;border-radius:8px;border:2px solid rgba(0,0,0,0.18);
      font-size:10px; /* requested */
    }

    /* Chat */
    .chat-toggle{display:block;text-align:center;padding:8px;background:#111;color:#fff;font-weight:700;cursor:pointer;border-radius:6px;margin:8px auto;max-width:200px}
    #chatbox{width:100%;max-width:900px;margin:0 auto;border-top:2px solid #222;background:#060606;border-radius:6px;overflow:hidden}
    #chat-iframe{width:100%;height:420px;border:0;display:block}

    /* Portrait vs landscape handling with small tweak */
    @media (orientation:landscape){
      /* landscape smaller height: hide chat by default (but user can toggle) */
      #chatbox{display:none}
    }

    @media (max-width:600px){
      .controls{flex-direction:column;align-items:flex-start}
      .join-grid{gap:8px;padding:0 12px}
    }
    footer{color:#aaa;text-align:center;font-size:13px;margin-top:12px}
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>Live Stream</h1>
      <div class="controls">
        <label for="aspect">Aspect:</label>
        <select id="aspect">
          <option value="16-9" selected>16:9</option>
          <option value="4-3">4:3</option>
          <option value="21-9">21:9</option>
          <option value="stretch">Stretch</option>
        </select>
        <button id="cinemaBtn" title="Toggle Cinema">Cinema</button>
        <button id="fsBtn" title="Fullscreen">Fullscreen</button>
      </div>
    </header>

    <!-- Player -->
    <section id="playerWrap" class="player-wrap aspect-16-9">
      <video id="video" controls playsinline></video>
    </section>

    <!-- 4 JOIN buttons (edit URLs below in JS or change directly here) -->
    <section class="join-grid" id="joinGrid">
      <a class="join-btn" id="join1" href="#" target="_blank">JOIN CHANNEL 1</a>
      <a class="join-btn" id="join2" href="#" target="_blank">JOIN CHANNEL 2</a>
      <a class="join-btn" id="join3" href="#" target="_blank">JOIN CHANNEL 3</a>
      <a class="join-btn" id="join4" href="#" target="_blank">JOIN CHANNEL 4</a>
    </section>

    <!-- Chat toggle and Chat iframe (Cbox) -->
    <div class="chat-toggle" id="chatToggle">üí¨ Open Chat</div>
    <div id="chatbox" aria-hidden="true">
      <!-- YOUR CBOX iframe (already given by you) -->
      <iframe id="chat-iframe" src="https://www5.cbox.ws/box/?boxid=958649&boxtag=4GqwTn"
              allowtransparency="yes" allow="autoplay" scrolling="auto"></iframe>
    </div>

    <footer>
      <p style="text-align:center;margin:0;color:#ddd;font-weight:700;">
        ‡§∏‡§≠‡•Ä ‡§≤‡•ã‡§ó ‡§π‡§Æ‡§æ‡§∞‡•á ‡§™‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ø‡§Æ ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§¨‡§®‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è JOIN ‡§ï‡§∞‡•á‡§Ç
      </p>
    </footer>
  </div>

<script>
  // ========== CONFIG (change here) ==========
  // Default stream (put your playable m3u8 here)
  const DEFAULT_M3U8 = "https://d14v4v80cpjht7.cloudfront.net/file_library/videos/vod_non_drm_hls/migration/6364641427112/6364641427112.m3u8"; // e.g. "https://example.com/stream/master.m3u8"

  // Replace join buttons' URLs here (or edit directly in HTML above)
  const JOIN_LINKS = [
    {id: "join1", title: "JOIN SPORTS", url: "https://https://t.me/+-c580a3MZ05mNGFl"},
    {id: "join2", title: "JOIN MOVIES", url: "https://t.me/+-c580a3MZ05mNGFl"},
    {id: "join3", title: "JOIN NEWS", url: "https://t.me/+-c580a3MZ05mNGFl"},
    {id: "join4", title: "JOIN MUSIC",  url: "https://t.me/+-c580a3MZ05mNGFl"}
  ];
  // ===========================================

  // populate join buttons
  JOIN_LINKS.forEach(l=>{
    const el = document.getElementById(l.id);
    if(el){ el.href = l.url; el.innerText = l.title; }
  });

  // HLS player init
  const video = document.getElementById('video');
  function initHls(src){
    if(!src) return;
    if(window.hls){ try{ window.hls.destroy(); }catch(e){} window.hls = null; }
    if(Hls.isSupported()){
      const hls = new Hls();
      window.hls = hls;
      hls.loadSource(src);
      hls.attachMedia(video);
    } else if (video.canPlayType('application/vnd.apple.mpegurl')){
      video.src = src;
    } else {
      console.warn('HLS not supported in this browser');
    }
  }
  // load default if provided
  if(DEFAULT_M3U8) initHls(DEFAULT_M3U8);

  // Aspect selector
  const aspectSelect = document.getElementById('aspect');
  const wrap = document.getElementById('playerWrap');
  const aspectMap = {"16-9":"aspect-16-9","4-3":"aspect-4-3","21-9":"aspect-21-9","stretch":"aspect-stretch"};
  aspectSelect.addEventListener('change', ()=>{
    Object.values(aspectMap).forEach(c => wrap.classList.remove(c));
    wrap.classList.add(aspectMap[aspectSelect.value]);
  });

  // Cinema + Fullscreen
  document.getElementById('cinemaBtn').addEventListener('click', ()=>{
    document.body.classList.toggle('cinema-mode');
  });
  document.getElementById('fsBtn').addEventListener('click', ()=>{
    if(!document.fullscreenElement){ wrap.requestFullscreen().catch(()=>{}); } else { document.exitFullscreen().catch(()=>{}); }
  });

  // Chat toggle + orientation behavior
  const chatToggle = document.getElementById('chatToggle');
  const chatbox = document.getElementById('chatbox');

  function setChatVisibility(show){
    chatbox.style.display = show ? 'block' : 'none';
    chatbox.setAttribute('aria-hidden', !show);
    chatToggle.innerText = show ? 'üí¨ Close Chat' : 'üí¨ Open Chat';
  }

  chatToggle.addEventListener('click', ()=>{
    const isShown = chatbox.style.display === 'block';
    setChatVisibility(!isShown);
  });

  function checkOrient(){
    // Portrait -> show chat by default; Landscape -> hide chat by default
    if(window.innerHeight > window.innerWidth){
      // portrait
      setChatVisibility(true);
    } else {
      // landscape
      setChatVisibility(false);
    }
  }
  window.addEventListener('resize', checkOrient);
  window.addEventListener('load', checkOrient);

  // Optional: clicking a join button that links to an m3u8 will load it
  document.getElementById('joinGrid').addEventListener('click', (e)=>{
    const a = e.target.closest('a.join-btn');
    if(!a) return;
    const href = a.getAttribute('href') || '';
    if(href.includes('.m3u8')){
      initHls(href);
      setTimeout(()=> wrap.scrollIntoView({behavior:'smooth', block:'center'}), 200);
    }
  });

</script>
</body>
  </html>
